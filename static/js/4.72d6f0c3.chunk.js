(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{202:function(e,t,n){"use strict";n.r(t);var a,c,r,o,s,i,u,l,j,d,b,p,x,h,O,f,g,v,m,w,y,k,F,C,A,I,S,P,z,E,_,T,R,U,W,L,M,B,D,H,N,V,q,G,J,Y,K,Q,X,Z,$,ee=n(31),te=n(0),ne=n(37),ae=n(213),ce=n(218),re=n(219),oe=n(52),se=n(209),ie=n(53),ue=n(15),le=n(193),je=n(192),de=n(208),be=n(205),pe=n(133),xe=n(214),he=n(210),Oe=n(191),fe=n(3),ge=Object(ne.a)(ae.a)(a||(a=Object(ee.a)(["\n    display: flex;\n    justify-content: center;\n"]))),ve=Object(ne.a)("img")({width:200,height:200,borderRadius:"50%",padding:"25px 0"}),me=Object(ne.a)(ae.a)(c||(c=Object(ee.a)(["\n    background: #FFFFFF;\n    padding: 12px 30px 2px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n    & :first-child {\n        font-size: 13px;\n        color: #009688;\n        font-weight: 200;\n    };\n    & :last-child {\n        margin: 14px 0;\n        color: #4A4A4A;\n    }\n"]))),we=Object(ne.a)(ae.a)(r||(r=Object(ee.a)(["\n    padding: 15px 20px 28px 30px;\n    & > p {\n        color: #8696a0;\n        font-size: 13px;\n    }\n"]))),ye=function(){var e=Object(te.useContext)(oe.a).account;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ge,{children:Object(fe.jsx)(ve,{src:e.picture,alt:"displaypicture"})}),Object(fe.jsxs)(me,{children:[Object(fe.jsx)(xe.a,{children:"Your name"}),Object(fe.jsx)(xe.a,{children:e.name})]}),Object(fe.jsx)(we,{children:Object(fe.jsx)(xe.a,{children:"This is not your username or pin. This name will be visible to your WhatsApp contacts."})}),Object(fe.jsxs)(me,{children:[Object(fe.jsx)(xe.a,{children:"About"}),Object(fe.jsx)(xe.a,{children:"Eat! Sleep! Code! Repeat"})]})]})},ke=Object(ne.a)(ae.a)(o||(o=Object(ee.a)(["\n  background: #008069;\n  height: 107px;\n  color: #FFFFFF;\n  display: flex;\n  & > svg, & > p {\n    margin-top: auto;\n    padding: 15px;\n    font-weight: 600;\n"]))),Fe=Object(ne.a)(ae.a)(s||(s=Object(ee.a)(["\n  background: #ededed;\n  height: 85%;\n"]))),Ce=Object(ne.a)(xe.a)(i||(i=Object(ee.a)(["\n    font-size: 18px;\n"]))),Ae={left:20,top:17,height:"95%",width:"30%",boxShadow:"none"},Ie=function(e){var t=e.open,n=e.setOpen,a=e.profile;return Object(fe.jsxs)(he.a,{open:t,onClose:function(){n(!1)},PaperProps:{sx:Ae},style:{zIndex:1500},children:[Object(fe.jsxs)(ke,{children:[Object(fe.jsx)(Oe.a,{onClick:function(){return n(!1)}}),Object(fe.jsx)(Ce,{children:"Profile"})]}),Object(fe.jsx)(Fe,{children:a&&Object(fe.jsx)(ye,{})})]})},Se=Object(ne.a)(de.a)(u||(u=Object(ee.a)(["\n    font-size: 14px\n    padding: 15px 60px 5px 24px;\n    color: #4A4A4A;\n"]))),Pe=(Object(ne.a)(pe.GoogleLogout)(l||(l=Object(ee.a)(["\n    border: none;\n    box-shadow: none;\n"]))),function(){var e=Object(te.useState)(!1),t=Object(ue.a)(e,2),n=t[0],a=t[1],c=Object(te.useState)(!1),r=Object(ue.a)(c,2),o=r[0],s=r[1],i=Object(te.useContext)(oe.a),u=(i.setAccount,i.setShowloginButton,i.showlogoutButton,i.setShowlogoutButton,Object(te.useContext)(ie.a).setPerson,function(){a(null)});return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(je.a,{onClick:function(e){a(e.currentTarget)}}),Object(fe.jsx)(be.a,{anchorEl:n,keepMounted:!0,open:n,onClose:u,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(fe.jsx)(Se,{onClick:function(){u(),s(!0)},children:"Profile"})}),Object(fe.jsx)(Ie,{open:o,setOpen:s,profile:!0})]})}),ze=Object(ne.a)(ae.a)(j||(j=Object(ee.a)(["\n    height: 44px;\n    background: #ededed;\n    display: flex;\n    padding: 8px 16px;\n    align-items: center;\n"]))),Ee=Object(ne.a)(ae.a)(d||(d=Object(ee.a)(["\n    margin-left: auto;\n    & > * {\n        margin-left: 2px;\n        padding: 8px;\n        color: #000;\n    };\n    & :first-child {\n        font-size: 22px;\n        margin-right: 8px;\n        margin-top: 3px;\n    }\n"]))),_e=Object(ne.a)("img")({height:40,width:40,borderRadius:"50%"}),Te=function(){var e=Object(te.useState)(!1),t=Object(ue.a)(e,2),n=t[0],a=t[1],c=Object(te.useContext)(oe.a).account;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(ze,{children:[Object(fe.jsx)(_e,{src:c.picture,onClick:function(){a(!0)}}),Object(fe.jsxs)(Ee,{children:[Object(fe.jsx)(le.a,{}),Object(fe.jsx)(Pe,{})]})]}),Object(fe.jsx)(Ie,{open:n,setOpen:a,profile:!0})]})},Re=n(206),Ue=n(195),We=Object(ne.a)(ae.a)(b||(b=Object(ee.a)(["\n    background: #fff;\n    height: 45px;\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #F2F2F2;\n"]))),Le=Object(ne.a)(ae.a)(p||(p=Object(ee.a)(["\n    position: relative;\n    border-radius: 10px;\n    background-color: #f0f2f5;\n    margin: 0 13px;\n    width: 100%;\n"]))),Me=Object(ne.a)(ae.a)(x||(x=Object(ee.a)(["\n    color: #919191;\n    padding: 8px;\n    height: 100%;\n    position: absolute;\n"]))),Be=Object(ne.a)(Re.a)(h||(h=Object(ee.a)(["\n    width: 100%;\n    padding: 16px;\n    padding-left: 65px;\n    font-size: 14px;\n    height: 15px;\n    width: 100%;\n"]))),De=function(e){var t=e.setText;return Object(fe.jsx)(We,{children:Object(fe.jsxs)(Le,{children:[Object(fe.jsx)(Me,{children:Object(fe.jsx)(Ue.a,{fontSize:"small"})}),Object(fe.jsx)(Be,{placeholder:"Search or start new chat",inputProps:{"aria-label":"search"},onChange:function(e){return t(e.target.value)}})]})})},He=n(101),Ne=n.n(He),Ve=n(102),qe=n(196),Ge=n(142),Je=n.n(Ge),Ye="http://localhost:8000",Ke=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Ye,"/add-user"),t,{headers:{"Content-Type":"application/json"},withCredentials:!0,credentials:"include"});case 3:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log("Error while calling addUser API ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.get("".concat(Ye,"/get-users"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getUsers API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.get("".concat(Ye,"/user/me"),{headers:{"Content-Type":"application/json"},withCredentials:!0,credentials:"include"});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getUserSession API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Ye,"/conversation/add"),t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error while calling setConversation API ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Ye,"/conversation/get"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getConversation API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.get("".concat(Ye,"/message/get?conversationId=").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getMessages API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.a.post("".concat(Ye,"/file/upload"),t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error while calling newConversations API ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t,n){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{fetch(n).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=t;var c=n.split("/").pop();a.download=""+c,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t)})).catch((function(e){return console.log("Error while downloading the image ",e)}))}catch(a){console.log("Error while downloading the image ",a)}case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),at=function(e){var t=new Date(e).getHours(),n=new Date(e).getMinutes();return"".concat(t<10?"0"+t:t,":").concat(n<10?"0"+n:n)},ct=Object(ne.a)(ae.a)(O||(O=Object(ee.a)(["\n    height: 45px;\n    display: flex;\n    padding: 13px 0;\n    cursor: pointer;\n"]))),rt=Object(ne.a)("img")({width:50,height:50,objectFit:"cover",borderRadius:"50%",padding:"0 14px"}),ot=Object(ne.a)(ae.a)(f||(f=Object(ee.a)(["\n    display: flex;\n"]))),st=Object(ne.a)(xe.a)(g||(g=Object(ee.a)(["\n    font-size: 12px;\n    margin-left: auto;\n    color: #00000099;\n    margin-right: 20px;\n"]))),it=Object(ne.a)(xe.a)(v||(v=Object(ee.a)(["\n    display: block;\n    color: rgba(0, 0, 0, 0.6);\n    font-size: 14px;\n"]))),ut=function(e){var t,n=e.user,a=n.picture||"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png",c=Object(te.useContext)(ie.a).setPerson,r=Object(te.useContext)(oe.a),o=r.account,s=r.newMessageFlag,i=Object(te.useState)({}),u=Object(ue.a)(i,2),l=u[0],j=u[1];Object(te.useEffect)((function(){(function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e({senderId:o.sub,receiverId:n.sub});case 2:t=e.sent,j({text:null===t||void 0===t?void 0:t.message,timestamp:null===t||void 0===t?void 0:t.updatedAt});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var d=function(){var e=Object(Ve.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n),e.next=3,Ze({senderId:o.sub,receiverId:n.sub});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(fe.jsxs)(ct,{onClick:function(){return d()},children:[Object(fe.jsx)(ae.a,{children:Object(fe.jsx)(rt,{src:a,alt:"display picture"})}),Object(fe.jsxs)(ae.a,{style:{width:"100%"},children:[Object(fe.jsxs)(ot,{children:[Object(fe.jsx)(xe.a,{children:n.name}),(null===l||void 0===l?void 0:l.text)&&Object(fe.jsx)(st,{children:at(null===l||void 0===l?void 0:l.timestamp)})]}),Object(fe.jsx)(ae.a,{children:Object(fe.jsx)(it,{children:(null===l||void 0===l||null===(t=l.text)||void 0===t?void 0:t.includes("localhost"))?"media":l.text})})]})]})},lt=Object(ne.a)(ae.a)(m||(m=Object(ee.a)(["\n    overflow: overlay;\n    height: 81vh;\n"]))),jt=Object(ne.a)(qe.a)(w||(w=Object(ee.a)(["\n    margin: 0 0 0 70px;\n    background-color: #e9edef;\n    opacity: .6;\n"]))),dt=function(e){var t=e.text,n=Object(te.useState)([]),a=Object(ue.a)(n,2),c=a[0],r=a[1],o=Object(te.useContext)(oe.a),s=o.account,i=o.socket,u=o.setActiveUsers;return Object(te.useEffect)((function(){(function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var n,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:n=e.sent,a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(te.useEffect)((function(){i.current.emit("connectUser",s),i.current.on("getUsers",(function(e){u(e)}))}),[s]),Object(fe.jsx)(lt,{children:c&&c.map((function(e,t){return e.sub!==s.sub&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ut,{user:e},e.sub),c.length!==t+1&&Object(fe.jsx)(jt,{})]})}))})},bt=function(){var e=Object(te.useState)(""),t=Object(ue.a)(e,2),n=t[0],a=t[1];return Object(fe.jsxs)(ae.a,{children:[Object(fe.jsx)(Te,{}),Object(fe.jsx)(De,{setText:a}),Object(fe.jsx)(dt,{text:n})]})},pt=Object(ne.a)(ae.a)(y||(y=Object(ee.a)(["\n    height: 44px;\n    background: #ededed;\n    display: flex;\n    padding: 8px 16px;\n    align-items: center;\n"]))),xt=Object(ne.a)("img")({width:40,height:40,objectFit:"cover",borderRadius:"50%"}),ht=Object(ne.a)(xe.a)(k||(k=Object(ee.a)(["\n    margin-left: 12px !important;\n"]))),Ot=Object(ne.a)(ae.a)(F||(F=Object(ee.a)(["\n    margin-left: auto;\n    & > svg {\n        padding: 8px;\n        font-size: 22px;\n        color: #000;\n    }\n"]))),ft=Object(ne.a)(xe.a)(C||(C=Object(ee.a)(["\n    font-size: 12px !important;\n    color: rgb(0, 0, 0, 0.6);\n    margin-left: 12px !important;\n"]))),gt=function(e){var t=e.person,n=t.picture||"https://static.straitstimes.com.sg/s3fs-public/articles/2020/12/01/af_moneyheist_011220.jpg",a=Object(te.useContext)(oe.a).activeUsers;return Object(fe.jsxs)(pt,{children:[Object(fe.jsx)(xt,{src:n,alt:"display picture"}),Object(fe.jsxs)(ae.a,{children:[Object(fe.jsx)(ht,{children:t.name}),Object(fe.jsx)(ft,{children:(null===a||void 0===a?void 0:a.find((function(e){return e.sub===t.sub})))?"Online":"Offline"})]}),Object(fe.jsxs)(Ot,{children:[Object(fe.jsx)(Ue.a,{}),Object(fe.jsx)(je.a,{})]})]})},vt=n(26),mt=n(45),wt=(n(56),n(197)),yt=Object(ne.a)(ae.a)(A||(A=Object(ee.a)(["\n    background: #FFFFFF;\n    padding: 5px;\n    max-width: 60%;\n    width: fit-content;\n    display: flex;\n    border-radius: 10px;\n    word-break: break-word;\n"]))),kt=Object(ne.a)(ae.a)(I||(I=Object(ee.a)(["\n    background: #dcf8c6;\n    padding: 5px;\n    max-width: 60%;\n    width: fit-content;\n    margin-left: auto;\n    display: flex;\n    border-radius: 10px;\n    word-break: break-word;\n"]))),Ft=Object(ne.a)(xe.a)(S||(S=Object(ee.a)(["\n    font-size: 14px;\n    padding: 0 25px 0 5px;\n"]))),Ct=Object(ne.a)(xe.a)(P||(P=Object(ee.a)(["\n    font-size: 10px;\n    color: #919191;\n    margin-top: 6px;\n    word-break: keep-all;\n    margin-top: auto;\n"]))),At=function(e){var t=e.message;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ft,{children:t.text}),Object(fe.jsx)(Ct,{children:at(t.createdAt)})]})},It=function(e){var t,n=e.message;return Object(fe.jsxs)("div",{style:{position:"relative"},children:[(null===n||void 0===n||null===(t=n.text)||void 0===t?void 0:t.includes(".pdf"))?Object(fe.jsxs)("div",{style:{display:"flex"},children:[Object(fe.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/logos-and-brands/512/27_Pdf_File_Type_Adobe_logo_logos-512.png",alt:"pdf-icon",style:{width:80}}),Object(fe.jsx)(xe.a,{style:{fontSize:14},children:n.text.split("/").pop()})]}):Object(fe.jsx)("img",{style:{width:300,height:"100%",objectFit:"cover"},src:n.text,alt:n.text}),Object(fe.jsxs)(Ct,{style:{position:"absolute",bottom:0,right:0},children:[Object(fe.jsx)(wt.a,{onClick:function(e){return nt(e,n.text)},fontSize:"small",style:{marginRight:10,border:"1px solid grey",borderRadius:"50%"}}),at(n.createdAt)]})]})},St=function(e){var t=e.message,n=Object(te.useContext)(oe.a).account;return Object(fe.jsx)(fe.Fragment,{children:n.sub===t.senderId?Object(fe.jsx)(kt,{children:"file"===t.type?Object(fe.jsx)(It,{message:t}):Object(fe.jsx)(At,{message:t})}):Object(fe.jsx)(yt,{children:"file"===t.type?Object(fe.jsx)(It,{message:t}):Object(fe.jsx)(At,{message:t})})})},Pt=n(198),zt=n(199),Et=n(200),_t=Object(ne.a)(ae.a)(z||(z=Object(ee.a)(["\n    height: 55px;\n    background: #ededed;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    padding: 0 15px;\n    &  > * {\n        margin: 5px;\n        color: #919191;\n    }\n"]))),Tt=Object(ne.a)(ae.a)(E||(E=Object(ee.a)(["\n    border-radius: 18px;\n    background-color: #FFFFFF;\n    width: calc(94% - 100px);\n"]))),Rt=Object(ne.a)(Re.a)(_||(_=Object(ee.a)(["\n    width: 100%;\n    padding: 20px;\n    padding-left: 25px;\n    font-size: 14px;\n    height: 20px;\n    width: 100%;\n"]))),Ut=Object(ne.a)(Pt.a)(T||(T=Object(ee.a)(["\n    transform: 'rotate(40deg)'\n"]))),Wt=function(e){var t=e.sendText,n=e.value,a=e.setValue,c=e.setFile,r=e.file,o=e.setImage;Object(te.useEffect)((function(){(function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return(t=new FormData).append("name",r.name),t.append("file",r),e.next=6,tt(t);case 6:n=e.sent,o(n.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);return Object(fe.jsxs)(_t,{children:[Object(fe.jsx)(zt.a,{}),Object(fe.jsx)("label",{htmlFor:"fileInput",children:Object(fe.jsx)(Ut,{})}),Object(fe.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return function(e){a(e.target.files[0].name),c(e.target.files[0])}(e)}}),Object(fe.jsx)(Tt,{children:Object(fe.jsx)(Rt,{placeholder:"Type a message",inputProps:{"aria-label":"search"},onChange:function(e){return a(e.target.value)},onKeyPress:function(e){return t(e)},value:n})}),Object(fe.jsx)(Et.a,{})]})},Lt=Object(ne.a)(ae.a)(R||(R=Object(ee.a)(["\n    background-image: url(",");\n    background-size: 50%;\n"])),"https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png"),Mt=(Object(ne.a)(ae.a)(U||(U=Object(ee.a)(["\n    height: 55px;\n    background: #ededed;\n    // position: absolute;\n    width: 100%;\n    // bottom: 0\n"]))),Object(ne.a)(ae.a)(W||(W=Object(ee.a)(["\n    height: 80vh;\n    overflow-y: scroll;\n"])))),Bt=Object(ne.a)(ae.a)(L||(L=Object(ee.a)(["\n    padding: 1px 80px;\n"]))),Dt=function(e){var t,n=e.person,a=e.conversation,c=Object(te.useState)([]),r=Object(ue.a)(c,2),o=r[0],s=r[1],i=Object(te.useState)(null),u=Object(ue.a)(i,2),l=u[0],j=u[1],d=Object(te.useState)(),b=Object(ue.a)(d,2),p=b[0],x=b[1],h=Object(te.useState)(),O=Object(ue.a)(h,2),f=O[0],g=O[1],v=Object(te.useState)(),m=Object(ue.a)(v,2),w=m[0],y=m[1],k=Object(te.useRef)(),F=Object(te.useContext)(oe.a),C=F.account,A=F.socket,I=F.newMessageFlag,S=F.setNewMessageFlag;Object(te.useEffect)((function(){A.current.on("getMessage",(function(e){console.log(e),j(Object(mt.a)(Object(mt.a)({},e),{},{createdAt:Date.now()}))}))}),[]),Object(te.useEffect)((function(){(function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(null===a||void 0===a?void 0:a._id);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[null===a||void 0===a?void 0:a._id,n._id,I]),Object(te.useEffect)((function(){var e;null===(e=k.current)||void 0===e||e.scrollIntoView({transition:"smooth"})}),[o]),Object(te.useEffect)((function(){var e;l&&(null===a||void 0===a||null===(e=a.members)||void 0===e?void 0:e.includes(l.senderId))&&s((function(e){return[].concat(Object(vt.a)(e),[l])}))}),[l,a]);var P=null===a||void 0===a||null===(t=a.members)||void 0===t?void 0:t.find((function(e){return e!==C.sub})),z=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){var n,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,p){e.next=3;break}return e.abrupt("return");case 3:13===n&&(c={},c=f?{senderId:C.sub,conversationId:a._id,receiverId:P,type:"file",text:w}:{senderId:C.sub,receiverId:P,conversationId:a._id,type:"text",text:p},A.current.emit("sendMessage",c),x(""),g(),y(""),S((function(e){return!e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(fe.jsxs)(Lt,{children:[Object(fe.jsx)(Mt,{children:o&&o.map((function(e){return Object(fe.jsx)(Bt,{ref:k,children:Object(fe.jsx)(St,{message:e})})}))}),Object(fe.jsx)(Wt,{sendText:z,value:p,setValue:x,setFile:g,file:f,setImage:y})]})},Ht=function(){var e=Object(te.useContext)(ie.a).person,t=Object(te.useContext)(oe.a).account,n=Object(te.useState)({}),a=Object(ue.a)(n,2),c=a[0],r=a[1];return Object(te.useEffect)((function(){(function(){var n=Object(Ve.a)(Ne.a.mark((function n(){var a;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$e({senderId:t.sub,receiverId:e.sub});case 2:a=n.sent,r(a);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e.sub]),Object(fe.jsxs)(ae.a,{style:{height:"75%"},children:[Object(fe.jsx)(gt,{person:e}),Object(fe.jsx)(Dt,{person:e,conversation:c})]})},Nt=Object(ne.a)(ae.a)(M||(M=Object(ee.a)(["\n    background: #f8f9fa;\n    padding: 30px 0;\n    text-align: center;\n    height: 100%;\n"]))),Vt=Object(ne.a)(ae.a)(B||(B=Object(ee.a)(["\n    padding: 0 200px;\n"]))),qt=Object(ne.a)("img")({marginTop:100,width:400}),Gt=Object(ne.a)(xe.a)(D||(D=Object(ee.a)(["\n    font-size: 32px;\n    font-family: inherit;\n    font-weight: 300;\n    color: #41525d;\n    margin-top: 25px 0 10px 0;\n"]))),Jt=Object(ne.a)(xe.a)(H||(H=Object(ee.a)(["\n    font-size: 14px;\n    color: #667781;\n    font-weight: 400;\n    font-family: inherit;\n"]))),Yt=Object(ne.a)(qe.a)(N||(N=Object(ee.a)(["\n    margin: 40px 0;\n    opacity: 0.4;\n"]))),Kt=function(){return Object(fe.jsx)(Nt,{children:Object(fe.jsxs)(Vt,{children:[Object(fe.jsx)(qt,{src:"https://i.gadgets360cdn.com/large/whatsapp_multi_device_support_update_image_1636207150180.jpg",alt:"empty"}),Object(fe.jsx)(Gt,{children:"WhatsApp Web"}),Object(fe.jsx)(Jt,{children:"Now send and receive messages without keeping your phone online."}),Object(fe.jsx)(Jt,{children:"Use WhatsApp on up to 4 linked devices and 1 phone at the same time. "}),Object(fe.jsx)(Yt,{})]})})},Qt=Object(ne.a)(ae.a)(V||(V=Object(ee.a)(["\n    display: flex;\n"]))),Xt=Object(ne.a)(ae.a)(q||(q=Object(ee.a)(["\n    min-width: 450px;\n"]))),Zt=Object(ne.a)(ae.a)(G||(G=Object(ee.a)(["\n    width: 75%;\n    min-width: 700px;\n    height: 100%;\n    border-left: 1px solid rgba(0, 0, 0, 0.14);\n"]))),$t={height:"95%",width:"90%",margin:"20px",maxWidth:"100%",maxHeight:"100%",borderRadius:0,boxShadow:"none",overflow:"hidden"},en=function(){var e=Object(te.useContext)(ie.a).person;return Object(fe.jsx)(se.a,{open:!0,BackdropProps:{style:{backgroundColor:"unset"}},PaperProps:{sx:$t},maxWidth:"md",children:Object(fe.jsxs)(Qt,{children:[Object(fe.jsx)(Xt,{children:Object(fe.jsx)(bt,{})}),Object(fe.jsx)(Zt,{children:Object.keys(e).length?Object(fe.jsx)(Ht,{}):Object(fe.jsx)(Kt,{})})]})})},tn=n(217),nn=n(207),an=n(60),cn=n(162),rn=Object(ne.a)(ae.a)(J||(J=Object(ee.a)(["\n    display: flex; \n"]))),on=Object(ne.a)(ae.a)(Y||(Y=Object(ee.a)(["\n    padding: 56px 0 56px 56px;\n"]))),sn=Object(ne.a)("img")({margin:"50px 0 0 50px",height:264,width:264}),un=Object(ne.a)(xe.a)(K||(K=Object(ee.a)(["\n    font-size: 26px;\n    margin-bottom: 25px;\n    color: #525252;\n    font-family: Segoe UI,Helvetica Neue,Helvetica,Lucida Grande,Arial,Ubuntu,Cantarell,Fira Sans,sans-serif;\n    font-weight: 300;\n"]))),ln=Object(ne.a)(tn.a)(Q||(Q=Object(ee.a)(["\n    &  > li {\n        padding: 0;\n        margin-top: 15px;\n        font-size: 18px;\n        line-height: 28px;\n        color: #4a4a4a;\n    }\n"]))),jn={marginTop:"12%",height:"95%",width:"60%",maxWidth:"100",maxHeight:"100%",borderRadius:0,boxShadow:"none",overflow:"hidden"},dn=function(){var e=Object(te.useContext)(oe.a),t=e.setAccount,n=e.showloginButton,a=e.setShowloginButton,c=e.setShowlogoutButton;Object(te.useEffect)((function(){(function(){var e=Object(Ve.a)(Ne.a.mark((function e(){var t;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe();case 2:t=e.sent,console.log(t),t&&t.sub&&(o(t),console.log("user exists in cookie",t.sub));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var r=function(){var e=Object(Ve.a)(Ne.a.mark((function e(t){var n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(cn.a)(t.credential),console.log("login success"),o(n),e.next=5,Ke(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e){t(e),a(!1),c(!0)};return Object(fe.jsx)(se.a,{open:!0,BackdropProps:{style:{backgroundColor:"unset"}},maxWidth:"md",PaperProps:{sx:jn},children:Object(fe.jsxs)(rn,{children:[Object(fe.jsxs)(on,{children:[Object(fe.jsx)(un,{children:"To use WhatsApp on your computer:"}),Object(fe.jsxs)(ln,{children:[Object(fe.jsx)(nn.a,{children:"1. Open WhatsApp on your phone"}),Object(fe.jsx)(nn.a,{children:"2. Tap Menu Settings and select WhatsApp Web"}),Object(fe.jsx)(nn.a,{children:"3. Point your phone to this screen to capture the code"})]})]}),Object(fe.jsxs)(ae.a,{style:{position:"relative"},children:[Object(fe.jsx)(sn,{src:"https://www.ginifab.com/feeds/qr_code/img/qrcode.jpg",alt:"QR Code"}),Object(fe.jsx)(ae.a,{style:{position:"absolute",top:"50%",transform:"translateX(25%) translateY(-25%)"},children:n?Object(fe.jsx)(an.a,{buttonText:"",onSuccess:r,onError:function(e){console.log("Login Failed:",e)},cookiePolicy:"single_host_origin",auto_select:!1}):null})]})]})})},bn=Object(ne.a)(ae.a)(X||(X=Object(ee.a)(["\n    height: 100vh;\n    background: #DCDCDC;\n"]))),pn=Object(ne.a)(ce.a)(Z||(Z=Object(ee.a)(["\n    background-color: #00A884;\n    height: 125px;\n    box-shadow: none;\n"]))),xn=Object(ne.a)(ce.a)($||($=Object(ee.a)(["\n    background: #00bfa5;\n    height: 200px;\n    box-shadow: none;\n"])));t.default=function(){var e=Object(te.useContext)(oe.a).account;return Object(fe.jsx)(bn,{children:e?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(pn,{children:Object(fe.jsx)(re.a,{})}),Object(fe.jsx)(en,{})]}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(xn,{children:Object(fe.jsx)(re.a,{})}),Object(fe.jsx)(dn,{})]})})}}}]);
//# sourceMappingURL=4.72d6f0c3.chunk.js.map